(function(){"use strict";var y="/erwasm-vue/assets/price_service.fat-lpnXA__V.wasm";const m=new TextEncoder,u=new TextDecoder,g=t=>({"wasi:cli/stdout@0.2.0":{"get-stdout":()=>0},"wasi:io/streams@0.2.0":{"[method]output-stream.blocking-write-and-flush":(e,n,r,o)=>{const i=t().instance.exports.memory.buffer,a=new Uint8Array(i.slice(n,n+r));console.log(u.decode(a))}}}),_={encode(t,e){return e},decode(t,e){return e}};function b(t){return t.every(e=>typeof e=="number"&&e<255)}function h(t,e){return t<<2|e}function v(t,e){return t<<4|e}function x(t){return h(t,2)}function c(t,e){let n=0;return n=n|t.getUint8(e),n=n|t.getUint8(e+1)<<8,n=n|t.getUint8(e+2)<<16,n=n|t.getUint8(e+3)<<24,n}function f(t,e){const n=new DataView(t.instance.exports.memory.buffer),r=t.instance.exports["minibeam#alloc_binary_1"],o=r(e.length<<3);for(let s in e)n.setUint8(o+8+Number(s),e[s]);return x(o)}function A(t,e){const n=new DataView(t.instance.exports.memory.buffer),o=c(n,e+4)>>>3,s=new Uint8Array(o);let i=0;for(;i<o;)s[i]=c(n,e+8+i),i+=1;return s}function d(t,e){const n=new DataView(t.instance.exports.memory.buffer),r=c(n,e);if(r==36)return A(t,e);throw new Error("Unknown tag "+r.toString(16))}function U(t,e){const n=t.instance.exports["erlang#atom_to_binary_1"],r=n(e);if((r&3)!==2)throw new Error("Invariant failure. Should either return mem or panic");const o=d(t,r>>>2),s=u.decode(o),i={false:!1,true:!0};return s in i?i[s]:Symbol.for(s)}function F(t,e){const n=new DataView(t.instance.exports.memory.buffer),r=t.instance.exports.__exception.value,o=c(n,r),s=c(n,r+8);return t.instance.exports.__exception.value=s||r,n.setUint32(r,0),n.setUint32(r+4,0),n.setUint32(r+8,0),[e.decode(t,o)]}function S(t){const e=t.instance.exports["minibeam#print_trace_0"];e()}const B={encode(t,e){return typeof e=="number"?v(e,15):Array.isArray(e)&&b(e)?f(t,e):typeof e=="string"?f(t,m.encode(e)):e},decode(t,e){if(e===-256){const[n,r]=F(t,this);throw S(t),new Error(n.toString())}return(e&15)===15?e>>>4:(e&63)===11?U(t,e):(e&3)===2?d(t,e>>>2):e}};function $(t,e,n=!1){const r=n?_:B;return new Proxy(t,{get(o,s){if(s!=="then")return function(...i){const a=i.length,p=o.instance.exports[`${e}#${s}_${a}`];if(!p)throw new TypeError(`Function not found. Was looking for ${e}:${s}/${a}.`);const T=[...i].map(k=>r.encode(t,k)),V=p(...T);return r.decode(t,V)}}})}async function E(t,e,n){const r=await WebAssembly.instantiateStreaming(e,g(()=>r));return $(r,t,n)}let l,w,P=new Promise(t=>{w=t});async function D(t){const e=new URL(Object.assign({"../esrc/price_service.fat.wasm":y})[`../esrc/${t}.fat.wasm`],self.location.href),n=await E(t,fetch(e));l=r=>{const o=n.request(JSON.stringify(r));return JSON.parse(u.decode(o))},w()}onmessage=async t=>{const[e,n,r]=t.data;let o;n==="init"&&(o=await D(r)),n==="json"&&(await P,o=l(r)),postMessage([e,o])}})();
